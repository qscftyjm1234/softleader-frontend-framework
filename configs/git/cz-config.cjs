/**
 * Commitizen (cz-customizable) 設定檔
 *
 * 這個檔案負責設定 `npm run commit` 時的互動介面。
 * 讓開發者可以用選單的方式，產生標準的 commit message。
 *
 * 相關文件:
 * - 官方文件: https://github.com/leoforfree/cz-customizable
 * - 專案文件: docs/guides/git-workflow.md
 */
'use strict'

// 為了保持 commitlint (檢查工具) 與 commitizen (互動工具) 的標準一致，
// 我們將「Commit 類型 (types)」與「長度限制」抽離到獨立的 commit-types.cjs 檔案。
// 這樣修改一個地方，兩個工具都會生效。
const { types, maxHeaderLength } = require('./commit-types.cjs')

module.exports = {
  // -------------------------------------------------------------------------
  // 1. Commit 類型列表
  // -------------------------------------------------------------------------
  // 定義 feat, fix, docs 等選項。
  // 若要新增或修改選項，請去 ./commit-types.cjs 修改。
  types,

  // -------------------------------------------------------------------------
  // 2. 影響範圍
  // -------------------------------------------------------------------------
  // 用來描述這次改動影響的模組，例如: ['auth', 'user', 'api']。
  // 若設定為空陣列 []，使用者可以手動輸入任何範圍。
  // 若設定有值，使用者只能從選單中選擇。
  scopes: [],

  // 是否允許使用者輸入不在 scopes 列表中的自訂範圍
  allowCustomScopes: true,

  // -------------------------------------------------------------------------
  // 3. 互動行為設定
  // -------------------------------------------------------------------------

  // 設定只有哪些類型可以宣告 "Breaking Change" (破壞性變更)。
  //
  // 什麼是 Breaking Change?
  // -> 代表這次更新「不相容」舊版本。例如：API 欄位名稱改了、刪除了一個舊功能。
  // -> 當版號工具 (standard-version) 看到 Breaking Change 時，會自動把「主版號」+1 (例如 1.0.0 -> 2.0.0)。
  //
  // 為什麼只設 ['feat', 'fix']?
  // -> 因為通常只有「新功能」或「修 Bug」才會有破壞性變更。
  // -> 如果你選 docs (改文件) 或 style (改格式)，工具就不會問你這個問題，省時間。
  allowBreakingChanges: ['feat', 'fix'],

  // 跳過的問題
  // 預設會有 body, footer 等詳細問題，若覺得太繁瑣可以在這裡跳過。
  // 建議: 團隊初期可以先跳過 body/footer，習慣後再開啟。
  skipQuestions: ['body', 'breaking', 'footer'],

  // 標題的最大長度 (通常是 72 或 100)
  subjectLimit: maxHeaderLength,

  // -------------------------------------------------------------------------
  // 4. 提示文字 (Messages)
  // -------------------------------------------------------------------------
  // 這裡可以完全客製化互動介面的文字，建議用中文讓組員更好懂。
  messages: {
    type: '請選擇提交類型 (Type):',
    scope: '請輸入影響模組 (Scope) [可跳過]:',
    customScope: '請輸入自訂模組範圍:',
    subject: '請輸入標題 [必填]:',
    body: '請輸入詳細描述你在幹嘛 [可跳過，按 Enter 換行]:\n',
    breaking: '列出任何破壞性變動 (BREAKING CHANGES) [可跳過]:\n',
    footer: '列出此變更關閉的 Issues (例如 "fix #123") [可跳過]:\n',
    confirmCommit: '確定要提交以上內容嗎?'
  }
}
