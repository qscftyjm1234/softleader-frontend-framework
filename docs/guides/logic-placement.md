[â† è¿”å›æ–‡ä»¶å°è¦½](../index.md)

# é‚è¼¯æ”¾ç½®æŒ‡å— (Composables vs Utils)

æœ¬æŒ‡å—æ—¨åœ¨å¹«åŠ©é–‹ç™¼è€…æ­£ç¢ºåŠƒåˆ†ä»£ç¢¼é‚è¼¯ã€‚æˆ‘å€‘å°‡å…¶åˆ†ç‚ºã€Œæ ¸å¿ƒæº–å‰‡ã€èˆ‡ã€Œå¯¦å‹™å¿«é€Ÿåˆ¤æ–·ã€å…©éƒ¨åˆ†ã€‚

---

## å¿«é€Ÿåˆ¤æ–·æ³• (ç›´è¦ºå°å‘)

å¦‚æœä½ æƒ³åœ¨ 3 ç§’å…§åšå‡ºæ±ºå®šï¼Œè«‹å•è‡ªå·±ï¼š**ã€Œé€™å€‹æ±è¥¿æœ‰æ²’æœ‰ã€è¨˜ä½ã€ä»€éº¼ç‹€æ…‹ï¼Ÿã€**

### 1. å¦‚æœå®ƒæ˜¯ã€ŒåŠ å·¥å» ã€â¡ï¸ æ”¾ `utils/`

- **ä»»å‹™**ï¼šçµ¦å®ƒè³‡æ–™ï¼Œå®ƒé‚„ä½ è™•ç†å¥½çš„è³‡æ–™ï¼ˆå¦‚ï¼šæ ¼å¼åŒ–ã€é‹ç®—ï¼‰ã€‚
- **ç‰¹æ€§**ï¼šä¸ç®¡æ˜¯åœ¨å“ªè£¡å‘¼å«ï¼Œåªè¦è¼¸å…¥ä¸€æ¨£ï¼Œçµæœä¸€å®šä¸€æ¨£ã€‚
- **ä¾‹å­**ï¼šé®è”½å€‹è³‡ã€æ—¥æœŸè½‰æ›ã€è¤‡é›œæ•¸å­¸è¨ˆç®—ã€‚

### 2. å¦‚æœå®ƒæ˜¯ã€Œä¿éšªç®±ã€æˆ–ã€Œç¶“ç†ã€â¡ï¸ æ”¾ `composables/`

- **ä»»å‹™**ï¼šå¹«ä½ ã€Œè¨˜ä½ã€è³‡æ–™ï¼ˆå¦‚ï¼šè¼‰å…¥ç‹€æ…‹ã€ä½¿ç”¨è€…è³‡è¨Šï¼‰ã€‚
- **ç‰¹æ€§**ï¼šå®ƒæœƒç”¨åˆ° Vue çš„åæ‡‰æ€§å·¥å…·ï¼ˆå¦‚ `ref`, `reactive`ï¼‰ã€‚
- **ä¾‹å­**ï¼šå­˜å– API è³‡æ–™ã€ç®¡ç†å½ˆçª—é–‹é—œã€è¿½è¹¤ç™»å…¥ç‹€æ…‹ã€‚

---

## ğŸ“š æ ¸å¿ƒæº–å‰‡ (ç²¾ç¢ºå®šç¾©)

ç‚ºäº†ç¢ºä¿ä»£ç¢¼çš„åš´è¬¹æ€§ï¼Œè«‹åƒè€ƒä»¥ä¸‹å°ç…§è¡¨ï¼š

| æ¯”è¼ƒé …ç›®     | Composables (çµ„åˆå¼å‡½å¼) | Utils (å·¥å…·å‡½å¼)       | Store (ç‹€æ…‹åº«)           |
| :----------- | :----------------------- | :--------------------- | :----------------------- |
| **å®šç¾©**     | å°è£**å…·åæ‡‰æ€§**çš„é‚è¼¯   | ç´”ç²¹çš„**é‚è¼¯é‹ç®—**å‡½å¼ | **å…¨åŸŸç‹€æ…‹**èˆ‡è³‡æ–™æµç®¡ç† |
| **åæ‡‰æ€§**   | **æœ‰** (ref/computed)    | **ç„¡** (ç´”å‡½å¼)        | **æœ‰** (State/Getters)   |
| **ç”Ÿå‘½é€±æœŸ** | è·Ÿéš¨ Component           | ç„¡                     | å…¨åŸŸå–®ä¾‹ (App Level)     |
| **æ¡†æ¶ä¾è³´** | Vue/Nuxt                 | ç¨ç«‹ (JS/TS)           | Pinia                    |
| **å‘½åæ…£ä¾‹** | `use` é–‹é ­ (useAuth)     | æè¿°æ€§ (formatDate)    | `use` é–‹é ­ (useUser)     |

---

## âœ… å¯¦éš›ç¨‹å¼ç¢¼å°ç…§

### ğŸ› ï¸ Utils (ç´”å·¥å…·ï¼Œç„¡ç‹€æ…‹)

```typescript
// utils/format/phone.ts
/** åƒ…è™•ç†å­—ä¸²åŠ å·¥ï¼Œä¸æ¶‰åŠç‹€æ…‹ */
export const maskPhone = (phone: string) => {
  return phone.replace(/(\d{4})\d{3}(\d{2})/, '$1***$2')
}
```

### ğŸ§  Composables (å…·ç‹€æ…‹ç®¡ç†)

```typescript
// composables/useUser.ts
/** ç®¡ç†ä½¿ç”¨è€…è³‡æ–™èˆ‡å…¶è¼‰å…¥ç‹€æ…‹ */
export const useUser = () => {
  const user = ref(null)
  const isLoading = ref(false)

  const load = async (id: string) => {
    isLoading.value = true
    user.value = await $api.get(`/users/${id}`)
    isLoading.value = false
  }

  return { user, isLoading, load }
}
```

---

## âš ï¸ é–‹ç™¼ç¦å¿Œ (Don'ts)

- **ä¸è¦åœ¨ `utils` ä¸­ä½¿ç”¨è¤‡æ•¸ç‹€æ…‹**ï¼šå¦‚æœä½ ç™¼ç¾å·¥å…·å‡½å¼éœ€è¦ç”¨åˆ° `ref()`ï¼Œè«‹å°‡å…¶ç§»å‹•è‡³ `composables`ã€‚
- **ä¸è¦åœ¨ `composable` ä¸­æ’°å¯«éé‡é‹ç®—**ï¼šè‹¥æœ‰è¤‡é›œçš„è³‡æ–™è™•ç†é‚è¼¯ï¼Œæ‡‰å…ˆå¯«åœ¨ `utils` ä¸­ï¼Œå†ç”± `composable` å‘¼å«ä¸¦å­˜å„²çµæœã€‚

---

## ç¸½çµ

- **åŠ å·¥/è™•ç†è³‡æ–™** â¡ï¸ `utils/`
- **å­˜å–/ç®¡ç†ç‹€æ…‹** â¡ï¸ `composables/`
